<% include ../layout/header %>
<% include ../layout/nav %>
<div class="box" style="margin: -10px;margin-top: 100px;">
	<div id="map"></div>
	<script type="text/javascript">

	var neighborhoods = <%= latLon %>;
	var title = [];
	var markers = [];
	var map;

	function initMap() {
		map = new google.maps.Map(document.getElementById('map'), {
			zoom: 12,
			center: {lat: <%= location.latitude %>, lng: <%= location.longitude %>}
		});
	}

	function drop() {
		clearMarkers();
		for (var i = 0; i < neighborhoods.length; i++) {
			addMarkerWithTimeout(neighborhoods[i], i * 200);
		}
	}

	function addMarkerWithTimeout(position, timeout) {
		window.setTimeout(function() {
			markers.push(new google.maps.Marker({
				position: position,
				map: map,
				animation: google.maps.Animation.DROP
			}));
		}, timeout);
	}

	function clearMarkers() {
		for (var i = 0; i < markers.length; i++) {
			markers[i].setMap(null);
		}
		markers = [];
	}


	drop()
	</script>
	<script async defer
	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAhrDmyCCHQW5bm9xDcj-IqQ3KdO78ibn0&callback=initMap">
	</script>

	<% include ../layout/footer %>
